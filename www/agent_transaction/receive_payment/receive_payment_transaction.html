<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7 lt-ie10"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8 lt-ie10"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9 lt-ie10"> <![endif]-->
<!--[if IE 9]>         <html class="no-js lt-ie10"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Digima House</title>
    <meta name="description" content="Page Description">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.43/css/bootstrap-datetimepicker-standalone.min.css">
    <link rel="stylesheet" href="../../public/assets/member/styles/92bc1fe4.bootstrap.css">
    <link rel="stylesheet" href="../../public/assets/member/styles/vendor/jquery.pnotify.default.css">
    <link rel="stylesheet" href="../../public/assets/member/styles/vendor/select2/select2.css">
    <link rel="stylesheet" href="../../public/assets/member/styles/vendor/datatables.css" media="screen"/> 
    <link rel="stylesheet" href="../../public/assets/member/styles/aaf5c053.proton.css">
    <link rel="stylesheet" href="../../public/assets/member/styles/vendor/animate.css">
    <link rel="stylesheet" href="../../public/assets/member/css/customBTN.css" type="text/css" />
    <link rel="stylesheet" href="../../public/assets/external/chosen/chosen/chosen.css" media="screen"/>
    
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
    <script src="../../public/assets/member/scripts/vendor/respond.min.js"></script>
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="../../public/assets/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../public/assets/member/styles/6227bbe5.font-awesome.css" type="text/css"/>
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" type="text/css"/> -->
    <link rel="stylesheet" href="../../public/assets/member/styles/40ff7bd7.font-titillium.css" type="text/css"/>
    <link rel="stylesheet" href="../../public/assets/member/css/member.css" type="text/css"/>
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/plugin/toaster/toastr.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/css/notice.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/css/loader.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/css/windows8.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/css/pis_ctr.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/css/image_gallery.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/plugin/dropzone/basic.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/custom_plugin/myDropList/css/myDropList.css">

    <!-- <link rel="stylesheet" type="text/css" href="../../public/assets/chartist/chartist.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="../../public/assets/member/plugin/dropzone/dropzone.min.css"> -->

    <link rel="stylesheet" href="../../public/assets/external/jquery_css/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="../../public/assets/mlm/pace.css">

    <style type="text/css">
    a
    {
        cursor: pointer;
    }
    #body
    {
        overflow-y: auto;
    }
    </style>
    <link rel="stylesheet" type="text/css" href="../../public/assets/member/css/global.css">
    <script>
    (function () {
    var js;
    if (typeof JSON !== 'undefined' && 'querySelector' in document && 'addEventListener' in window) {
    js = '../../public/assets/external/jquery.minv2.js';
    } else {
    js = '../../public/assets/external/jquery.minv1.js';
    }
    document.write('<script src="' + js + '"><\/script>');
    }());
    </script>
    <script src="../../public/assets/member/scripts/vendor/modernizr.js"></script>
    <script src="../../public/assets/member/scripts/vendor/jquery.cookie.js"></script>
    <script>
    $(function()
    {
        $(".datepicker").datepicker();
    });
    </script>
</head>
<body id="body">
   <script>
      var theme = $.cookie('protonTheme') || 'default';
      $('body').removeClass (function (index, css) {
      return (css.match (/\btheme-\S+/g) || []).join(' ');
      });
      if (theme !== 'default') $('body').addClass(theme);
   </script>
   <!--[if lt IE 8]>
   <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
   <![endif]-->
   <div class="modal-loader hidden"></div>
   <!-- Modal -->
   <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
         <!-- Modal content-->
         <div class="modal-content">
            <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Modal Header</h4>
            </div>
            <div class="modal-body">
               <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
         </div>
      </div>
   </div>
   <div class="row">
      <form class="form-receive-payment" action="" role="form" method="post">
         <span class="hidden for-tablet-only">for_tablet</span>
         <input type="hidden" class="button-action" name="button_action" value="">
         <input type="hidden" class="rp-id" name="rp_id" value="">
         <div class="form-group">
            <div class="col-md-12">
               <div class="panel panel-default panel-block panel-title-block" id="top">
                  <div class="panel-heading">
                     <div class="col-md-8 col-xs-6">
                        <i class="fa fa-tags"></i>
                        <h1>
                           <span class="page-title">Customer &raquo; Collection</span>
                           <small>
                              <!--Add a product on your website-->
                           </small>
                        </h1>
                     </div>
                     <div class="col-md-4 col-xs-6 text-right">
                        <a href="/agent/receive_payment.html" class="btn btn-custom-white">Cancel</a>
                        <button type="button" class="panel-buttons btn btn-custom-primary rp-save-btn" onClick="receive_payment_submit();" >Save</button>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="form-group">
            <div class="col-md-12">
               <div class="panel panel-default panel-block panel-title-block panel-gray">
                  <div class="tab-content rcvpymnt-container">
                     <div class="row rcvpymnt-load-data">
                        <!-- @include("member.receive_payment.load_content_receive_payment"); -->

                        <div class="col-md-12" style="padding: 30px;">
                           <!-- START CONTENT -->
                           <div style="border-bottom: 1px solid #ddd; padding-bottom: 10px; margin-bottom: 10px;">
                              <div class="row clearfix">
                                 <div class="col-sm-3">
                                    <!-- @if(isset($cm_data)) -->
                                    <!-- <input type="text" class="form-control" disabled name="rp_customer_name" value="Edward Guevarra">
                                    <input type="hidden" class="form-control" name="rp_customer_id" value="{{$c_id}}"> -->
                                    <!-- @else -->
                                    <select class="drop-down-customer customer-select-list" name="rp_customer_id" required>
                                    <!-- @url '/member/customer/load_customer' -->
                                    <!-- @foreach($_customer as $key=>$customer) -->
                                       <!-- <option value="{{$customer->customer_id}}" email="{{$customer->email}}">Edward Guevarra</option> -->
                                       <!-- @if(sizeOf($_customer)-1 == $key) -->
                                          <!-- <option class="hidden" value="" /> -->
                                       <!-- @endif -->
                                    <!-- @endforeach -->
                                    </select>
                                    <!-- @endif -->
                                 </div>
                                 <!--  <div class="col-sm-4">
                                    <button class="btn btn-custom-white btn-sm" data-placement="bottom" data-html="true" id="example" data-content="<form><br><input type='text' class='form-control input-sm' ><br><a style='cursor:pointer' class='pull-left' onclick='$(&quot;#example&quot;).popover(&quot;hide&quot;);'>Cancel</a><a style='cursor:pointer' class='pull-right'>Find</a><br></form>" data-toggle="popover">Find by invoice no.</button>
                                    </div> -->
                                    <div class="col-sm-9 text-right open-transaction" style="display: none;">
                                        <h4><a class="click-open-transaction" onClick=""><i class="fa fa-handshake-o"></i> <span class="count-open-transaction">0</span> Available Credits</a></h4>
                                    </div>
                              </div>
                           </div>
                           <div style="border-bottom: 1px solid #ddd; padding-bottom: 10px; margin-bottom: 10px;">
                              <div class="row clearfix">
                                 <div class="col-sm-2">
                                    <label>Payment Date</label>
                                    <input type="text" class="datepicker form-control input-sm" name="rp_date" value="07/26/17" />
                                 </div>
                                 <div class="col-sm-3">
                                    <label>Payment Method</label>
                                    <select class="drop-down-payment load-payment-method" name="rp_payment_method">
                                     
                                       <option class="hidden" value="" />
                                    </select>
                                 </div>
                                 <div class="col-sm-2">
                                    <label>Reference No</label>
                                    <input type="text" class="form-control input-sm" />
                                 </div>
                                 <div class="col-sm-3">
                                    <label>Deposit to</label>
                                    <select class="drop-down-coa rp-coa" name="rp_ar_account" required>
                                
                                    </select>
                                 </div>
                                 <div class="col-sm-2 pull-right">
                                    <label>Amount Received</label>
                                    <input type="text" class="input-sm form-control amount-received" value="">
                                 </div>
                              </div>
                              <!--  <div class="row clearfix">
                                 <div class="col-sm-3">
                                     <a>Accept Payment in My168shop</a>
                                 </div>
                                 </div> -->
                           </div>
                           <div class="row clearfix draggable-container">
                              <div class="table-responsive">
                                 <div class="col-sm-12">
                                    <table class="digima-table">
                                       <thead >
                                          <tr>
                                             <th style="width: 15px;"></th>
                                             <th>Description</th>
                                             <th style="width: 150px;" >Due Date</th>
                                             <th class="text-right" style="width: 120px;" class="text-right">Original Amount</th>
                                             <th class="text-right" style="width: 120px;">Balance Due</th>
                                             <th class="text-right" style="width: 120px;">Payment</th>
                                          </tr>
                                       </thead>
                                       <tbody class="tbody-item">
                                          <!-- @if(isset($_invoice) && $_invoice != null)
                                             @foreach($_invoice as $invoice) -->
                                                <tr>
                                                   <input type="hidden" value="invoice" name="rpline_txn_type[]">
                                                   <input type="hidden" value="{{$invoice['inv_id']}}" name="rpline_txn_id[]">
                                                    <td class="text-center">
                                                      <input type="hidden" class="line-is-checked" name="line_is_checked[]" value="" >
                                                      <input type="checkbox" class="line-checked">
                                                    </td>
                                                    <td></td>
                                                    <td class="text-right"></td>
                                                    <td><input type="text" class="text-right original-amount" value="" disabled /></td>
                                                    <td><input type="text" class="text-right balance-due" value="" disabled /></td>
                                                    <td><input type="text" class="text-right amount-payment" name="rpline_amount[]" value=""/></td>
                                                </tr>
                                             <!-- @endforeach
                                          @else
                                             <tr>
                                                 <td class="text-center"></td>
                                                 <td></td>
                                                 <td class="text-right"></td>
                                                 <td><input type="text" class="text-right" disabled /></td>
                                                 <td><input type="text" class="text-right" disabled /></td>
                                                 <td><input class="text-right" type="text" disabled /></td>
                                             </tr> 
                                          @endif -->
                                       </tbody>
                                    </table>
                                 </div>
                              </div>
                           </div>
                           <div class="row clearfix">
                              <div class="col-sm-6">
                                 <label>Memo</label>
                                 <textarea class="form-control input-sm textarea-expand" name="rp_memo" placeholder=""></textarea>
                              </div>
                              <div class="col-sm-6">
                                 <div class="row">
                                    <div class="col-md-7 text-right digima-table-label">
                                       Amount to Apply
                                    </div>
                                    <div class="col-md-5 text-right digima-table-value total">
                                       <input type="hidden" name="rp_total_amount" class="amount-to-apply" />
                                       <span class="amount-apply">PHP 0.00</span>
                                    </div>
                                 </div>
                                 <div class="row">
                                    <div class="col-md-7 text-right digima-table-label">
                                       Amount to Credit
                                    </div>
                                    <div class="col-md-5 text-right digima-table-value red">
                                       <input type="hidden" name="amount_to_credit" class="amount-to-credit" />
                                       <span class="amount-credit">PHP 0.00</span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!-- END CONTENT -->
                        </div>

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </form>
   </div>
   <div id="global_modal" class="modal fade" role="dialog" >
      <div class="modal-dialog">
         <!-- Modal content-->
         <div class="modal-content modal-content-global">
         </div>
      </div>
   </div>
   <!-- END GLOBAL MODAL -->
   <!-- GLOBAL MULTIPLE MODAL -->
   <div class="multiple_global_modal_container"></div>
   <!-- END GLOBAL MULTIPLE MODAL -->
   <!-- GFLOBAL IMAGE GALLERY -->
   <div id="ModalGallery" class="modal fade" role="dialog">
      <div class="modal-dialog modal-lg">
         <div class="modal-content">
            <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title"> Create Gallery </h4>
               <ul class="nav nav-tabs">
                  <li class="cursor-pointer"><a class="cursor-pointer tab-upload-files" data-toggle="tab" href="#upload-files"><i class="fa fa-upload"></i> Upload Files</a></li>
                  <li class="active cursor-pointer"><a class="cursor-pointer tab-media-library" data-toggle="tab" href="#media-library"><i class="fa fa-picture-o"></i> Media Library</a></li>
               </ul>
            </div>
            <div class="tab-content">
               <div class="tab-pane fade in" id="upload-files">
                  <div class="modal-body">
                     <div class="top-div clearfix">
                        <form action="/image/image_upload" id="myDropZone" class="dropzone" method="post" enctype="multipart/form-data">
                           <input type="hidden" class="token" name="_token" value="{{ csrf_token() }}">
                           <input type="file" name="file" id="myFile" multiple style="display: none"><br>
                           <div class="dz-message">
                              <span class="needsclick">
                                 <h1><b>DRAG & DROP</b></h1>
                                 <h4>your files here or click it to browse</h4>
                              </span>
                           </div>
                           <!-- <input type="submit" value="Upload File to Server"> -->
                        </form>
                     </div>
                  </div>
                  <!-- <div class="modal-footer">
                     <div class="pull-right">
                         <button type="button" class="btn btn-custom-white" data-dismiss="modal">Cancel</button>
                         <button type="button" class="btn btn-primary" >Upload</button>
                     </div>
                     </div> -->
               </div>
               <div class="tab-pane fade in active" id="media-library">
                  <div class="modal-body">
                     <div class="top-div clearfix">
                        <div class="row form-group col-md-3">
                           <select class="form-control input-sm" name="" id="">
                              <option name="" value="">Gallery Package 1</option>
                              <option name="" value="">Gallery Package 2</opiton>
                           </select>
                        </div>
                        <div class="row form-group col-md-4 pull-right">
                           <input type="text" placeholder="Search" name="search" class="form-control input-sm">
                        </div>
                     </div>
                     <div calss="middle-content">
                     </div>
                  </div>
                  <div class="modal-footer">
                     <div class="image-wrapper pull-left">
                        <div class="image-wrapper-info">
                           <div><i class="selected">0 </i>&nbsp;<i> Selected</i></div>
                           <div><a class="clear-all" href="javascript:">Clear</a></div>
                        </div>
                     </div>
                     <div class="pull-right">
                        <!-- <button type="button" class="btn btn-custom-white" data-dismiss="modal">Cancel</button> -->
                        <button type="button" class="btn btn-primary" id="get-selected-image">Get Selected Image</button>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <!-- MODAL START -->
    <div id="modal_credit" class="modal fade" role="dialog" >
      <div class="modal-dialog">
         <!-- Modal content-->
         <div class="modal-content modal-content-global">
           <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">×</button>
          <h4 class="modal-title">All Available Credits</h4>
          </div>
          <div class="modal-body clearfix">
            <div class="row">
              <div class="clearfix modal-body">
                  <div class="form-horizontal">
                      <input type="hidden" name="customer_id" value="{{$customer_id or ''}}">
                      <div class="form-group">
                          <h4>Customer Name : Juan Dela Cruz</h4>
                      </div>
                      <div class="form-group">
                          <table class="table table-condensed table-bordered {{$total_credit = 0}} {{$total_applied_credit =0}}">
                              <thead>
                                  <tr>
                                      <th class="text-center"><input type="checkbox" class="check-all-credit" name=""></th>
                                      <th>Credit Memo Number</th>
                                      <th>Amount</th>
                                      <th>Applied</th>
                                      <th>Amount to Apply</th>
                                  </tr>
                              </thead>
                              <tbody class="">
                              <tr class="{{$total_credit+= $credit->cm_amount}} {{$total_applied_credit+= $credit->applied_cm_amount}} tr-credit">
                                  <td class="text-center">
                                      <input type="checkbox" class="td-credit new-checkbox" value="50" name="apply_credit[cm_id]" data-content="50"  checked>
                                  </td>
                                  <td>50</td>
                                  <td class="text-center">50</td>
                                  <td class="text-center">0</td>
                                  <td class="text-center" {{currency('',cm_amount - applied_cm_amount)}}>
                                      <input type="text" class="form-control compute input-credit-cm text-right" value="0" name="apply_credit_amount[cm_id]">
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="2" class="text-right"><b> Total</b> </td>
                                  <td class="text-center"><b> PHP 0.00 </b></td>
                                  <td class="text-right"><b>PHP 0.00</b></td>
                                  <td class="text-right"><b class="amount-input-cm"> PHP 0.00</b></td>
                              </tr>
                              <tr>
                                  <td colspan="2" class="text-right"><b style="color:green"> Total Amount to Apply Credit</b> </td>
                                  <td colspan="3" class="text-right"><b class="total-apply-credit">PHP 0.00</b></td>
                              </tr>
                              </tbody>
                          </table>               
                      </div>
                  </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-def-white btn-custom-white" data-dismiss="modal">Close</button>
            <button class="btn btn-primary btn-custom-primary" type="submit">Apply</button>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('body').on('click','.check-all-credit', function()
            {
                $('input:checkbox.new-checkbox').not(this).prop('checked', this.checked); 
                compute_credit();        
            });
            $('body').on('click','.td-credit', function()
            {
                $(this).prop('checked', this.checked); 
                compute_credit();        
            });
            $('body').on('change','.compute',function()
            {
                compute_credit();
            });
            compute_credit();
            function compute_credit()
            {
                var total_apply_credit = 0;
                $(".tr-credit").each(function()
                {
                    $chk = $(this).find(".td-credit").is(":checked");
                    $amount = $(this).find(".input-credit-cm").val();
                    if($chk)
                    {
                        total_apply_credit += parseFloat($(this).find(".input-credit-cm").val());
                    }
                });
                // $('.td-credit').each(function(a, b)
                // {
                //     if($(b).is( ":checked" ))
                //     {
                //         total_apply_credit += parseFloat($(b).attr('data-content'));
                //     }
                // });
                $('.total-apply-credit').html('PHP '+total_apply_credit.toFixed(2));
            }   
        }); 
    </script>
   <!-- MODAL END -->



   <div class="settings_checking hide" id="do_not_remove_please"></div>
   <style type="text/css">
      .blink-ctr
      {
      animation: blinker 1s linear infinite;
      }
      @keyframes blinker
      {  
      50% { opacity: 0; }
      }
   </style>
   <script type="text/javascript" src="../../public/assets/member/global.js"></script>
   <script src="../../public/assets/external/jquery_ui/jquery_ui.js"></script>
   <script src="../../public/assets/member/scripts/e1d08589.bootstrap.min.js"></script>
   <script src="../../public/assets/member/scripts/9f7a46ed.proton.js"></script>
   <script type="text/javascript" src="../../public/assets/member/scripts/vendor/jquery.pnotify.min.js"></script>
   <script type="text/javascript" src="../../public/assets/member/plugin/toaster/toastr.min.js"></script>
   <!--<script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.43/js/bootstrap-datetimepicker.min.js'></script>-->
   <script type="text/javascript" src='../../public/assets/member/js/notice.js'></script>
   <script type="text/javascript" src="../../public/assets/external/chosen/chosen/chosen.jquery.js"></script>
   <script type="text/javascript" src='../../public/assets/member/plugin/dropzone/dropzone.js'></script>
   <script type="text/javascript" src='../../public/assets/member/js/image_gallery.js'></script>
   <script type="text/javascript" src='../../public/assets/custom_plugin/myDropList/js/myDropList.js'></script>
   <script type="text/javascript" src="../../public/assets/member/js/prompt_serial_number.js"></script>
   <script type="text/javascript" src='../../public/assets/member/js/match-height.js'></script>
   <script type="text/javascript" src='../../public/assets/chartjs/Chart.bundle.min.js'></script>
   <script type="text/javascript" src="../../public/assets/mlm/pace.min.js"></script>

   <script type="text/javascript">
   $(document).ajaxStart(function() { Pace.restart(); }); 
   $('.select_current_warehouse').click(function(event) 
   {
     event.stopPropagation();
   });
   function show_currency()
   {
     $('.change_currency').each(function(){
         var amount = $(this).html();
         var currency_change = formatPHP(amount); 
         $(this).html(currency_change);
       });
   }
   show_currency();
   function formatPHP(num) {
     var num2 = parseFloat(num);
     var p = num2.toFixed(2).split(".");
     return "PHP " + p[0].split("").reverse().reduce(function(acc, num, i, orig) {
         return  num=="-" ? acc : num + (i && !(i % 3) ? "," : "") + acc;
     }, "") + "." + p[1];
   }
   </script>
   <script type="text/javascript">
      $(".chosen-select").chosen({no_results_text: "The customer doesn't exist."});
      $('[data-toggle="popover"]').popover(); 
   </script>
   <script type="text/javascript" src="../../public/assets/member/js/textExpand.js"></script>
   <script type="text/javascript" src="../../public/assets/member/js/draggable_row.js"></script>
   <script type="text/javascript" src="../../public/assets/tablet/globals_tablet.js"></script>
   <script type="text/javascript" src="../../public/assets/member/js/receive_payment.js"></script>
   <script type="text/javascript" src="../../public/assets/member/js/receive_payment_transaction.js"></script>
   <script type="text/javascript" src="../../public/assets/tablet/edit_rp_transaction.js"></script>
</body>
</html>